<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Knowledge Engine Documentation – System Overview</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Lato', sans-serif;
      background-color: #f8f7f4;
      color: #4a4a4a;
    }
    .doc-section {
      background: white;
      padding: 2rem;
      border-radius: 0.75rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    .field-table th {
      text-transform: uppercase;
      font-size: 0.75rem;
      color: #6b7280;
    }
    h1 { font-family: 'Lora', serif; }
  </style>
</head>
<body class="p-6">
  <div class="max-w-5xl mx-auto space-y-8">
    <div>
      <h1 class="text-3xl font-black">Knowledge Engine – System Overview</h1>
      <p class="mt-2 text-gray-600">Datacenter Facilities Management Application – Architecture & Models Documentation</p>
    </div>

    <!-- Architecture -->
    <section class="doc-section">
      <h2 class="text-2xl font-bold mb-4">1. System Architecture</h2>
      <p class="text-sm mb-2">The project consists of multiple Django apps structured for modularity:</p>
      <ul class="list-disc list-inside text-sm space-y-1">
        <li><strong>users</strong> – Manages authentication, employee profiles, certifications.</li>
        <li><strong>assets</strong> – Tracks datacenter assets, logs, system telemetry.</li>
        <li><strong>incidents</strong> – Incident creation, tracking, and resolution workflows.</li>
        <li><strong>core</strong> – Dashboard UI, aggregate views, shared logic.</li>
      </ul>
    </section>

    <!-- User Model -->
    <section class="doc-section">
      <h2 class="text-2xl font-bold mb-4">2. User Profile Model</h2>
      <p class="text-sm mb-2">CustomUser extends Django's <code>AbstractUser</code> with employee-specific fields:</p>
      <div class="overflow-x-auto">
        <table class="w-full text-sm border field-table">
          <thead><tr class="bg-gray-100"><th class="p-2">Field</th><th class="p-2">Type</th><th class="p-2">Description</th></tr></thead>
          <tbody class="divide-y">
            <tr><td class="p-2 font-medium">username</td><td class="p-2">string</td><td class="p-2">Login ID</td></tr>
            <tr><td class="p-2 font-medium">email</td><td class="p-2">email</td><td class="p-2">Unique contact/email</td></tr>
            <tr><td class="p-2 font-medium">id_number</td><td class="p-2">string</td><td class="p-2">Staff or national identifier</td></tr>
            <tr><td class="p-2 font-medium">full_name</td><td class="p-2">string</td><td class="p-2">Employee's full name</td></tr>
            <tr><td class="p-2 font-medium">first_name / last_name</td><td class="p-2">string</td><td class="p-2">Legal name parts</td></tr>
            <tr><td class="p-2 font-medium">department</td><td class="p-2">string</td><td class="p-2">Department (e.g. Facilities, IT)</td></tr>
            <tr><td class="p-2 font-medium">designation</td><td class="p-2">string</td><td class="p-2">Role title</td></tr>
            <tr><td class="p-2 font-medium">shift</td><td class="p-2">string</td><td class="p-2">Work shift schedule</td></tr>
            <tr><td class="p-2 font-medium">on_duty</td><td class="p-2">boolean</td><td class="p-2">Current active duty</td></tr>
            <tr><td class="p-2 font-medium">certifications</td><td class="p-2">M2M</td><td class="p-2">Data center certification types</td></tr>
            <tr><td class="p-2 font-medium">photo</td><td class="p-2">image</td><td class="p-2">Profile photo</td></tr>
            <tr><td class="p-2 font-medium">login_time / logout_time</td><td class="p-2">datetime</td><td class="p-2">Recorded login/logout timestamps</td></tr>
          </tbody>
        </table>
      </div>
      <p class="mt-4 text-sm">Certifications options include: Uptime Institute Certified, TIA‑942, NFPA Fire Certified, BMS Operations, Generator Maintenance, HVAC, and more.</p>
    </section>

    <!-- Asset Model -->
    <section class="doc-section">
      <h2 class="text-2xl font-bold mb-4">3. Asset Model</h2>
      <p class="text-sm mb-2">Assets represent physical systems in the datacenter. AssetType includes:</p>
      <ul class="list-disc list-inside text-sm space-y-1">
        <li>IAC (In‑Row AC), UPS‑600 kVA, UPS‑10 kVA, Generators, Camera NVR + 100 cameras</li>
        <li>Water tanks, GRP tanks, Pumps (8), AHUs (6), Fire systems (9), Kidde Panels (8)</li>
      </ul>
      <div class="overflow-x-auto mt-4">
        <table class="w-full text-sm border field-table">
          <thead><tr class="bg-gray-100"><th class="p-2">Field</th><th class="p-2">Type</th><th class="p-2">Description</th></tr></thead>
          <tbody class="divide-y">
            <tr><td class="p-2 font-medium">name</td><td class="p-2">string</td><td class="p-2">Asset name or identifier</td></tr>
            <tr><td class="p-2 font-medium">asset_type</td><td class="p-2">choice</td><td class="p-2">Type from AssetType enum</td></tr>
            <tr><td class="p-2 font-medium">quantity</td><td class="p-2">integer</td><td class="p-2">Number of similar units</td></tr>
            <tr><td class="p-2 font-medium">location</td><td class="p-2">string</td><td class="p-2">Physical site location</td></tr>
          </tbody>
        </table>
      </div>
      <p class="mt-3 text-sm">Assets can optionally link to logs and telemetry (AssetLog model) for tracking sensor events and alarms.</p>
    </section>

    <!-- Incident Model -->
    <section class="doc-section">
      <h2 class="text-2xl font-bold mb-4">4. Incident Model</h2>
      <p class="text-sm mb-2">Incident records are identified by **RX‑UG‑INC000000** format and link to assets and users:</p>
      <div class="overflow-x-auto">
        <table class="w-full text-sm border field-table">
          <thead><tr class="bg-gray-100"><th class="p-2">Field</th><th class="p-2">Type</th><th class="p-2">Description</th></tr></thead>
          <tbody class="divide-y">
            <tr><td class="p-2 font-medium">number</td><td class="p-2">PK, string</td><td class="p-2">Unique automatically generated ID</td></tr>
            <tr><td class="p-2 font-medium">asset</td><td class="p-2">FK</td><td class="p-2">Related Asset (optional)</td></tr>
            <tr><td class="p-2 font-medium">priority</td><td class="p-2">choice</td><td class="p-2">Severity (1-Critical … 4-Low)</td></tr>
            <tr><td class="p-2 font-medium">state</td><td class="p-2">choice</td><td class="p-2">State (new, in_progress, resolved)</td></tr>
            <tr><td class="p-2 font-medium">short_description</td><td class="p-2">string</td><td class="p-2">Brief summary</td></tr>
            <tr><td class="p-2 font-medium">description</td><td class="p-2">text</td><td class="p-2">Detailed narrative</td></tr>
            <tr><td class="p-2 font-medium">assignee</td><td class="p-2">FK</td><td class="p-2">Assigned CustomUser (optional)</td></tr>
            <tr><td class="p-2 font-medium">created / updated</td><td class="p-2">datetime</td><td class="p-2">Timestamps</td></tr>
          </tbody>
        </table>
      </div>
      <p class="mt-3 text-sm">Incident numbers are generated using a simple count-based sequence with leading zeros to maintain fixed width.</p>
    </section>

    <!-- Future Modules -->
    <section class="doc-section">
      <h2 class="text-2xl font-bold mb-4">5. Future Modules</h2>
      <ul class="list-disc list-inside text-sm space-y-2">
        <li><strong>Change Management</strong> and <strong>Problem Management</strong> apps following the same incident numbering scheme.</li>
        <li>Asset event tracking with logs/alarms using AssetLog and Incident linkbacks.</li>
        <li>Full CRUD forms using Django Forms or HTMX/django‑rest‑framework.</li>
        <li>Role-based access control (engineer vs admin) using Django's permissions system.</li>
        <li>Real-time dashboards and metrics via Django Channels or polling APIs.</li>
        <li>Integration with SSO providers (Elantra, Azure AD, Office365 / OAuth) in the users app.</li>
      </ul>
    </section>
  </div>
</body>
</html>
